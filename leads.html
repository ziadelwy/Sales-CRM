<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ุฅุฏุงุฑุฉ ุงูุนููุงุก</title>
  <link rel="stylesheet" href="style.css"/>
  <link rel="icon" href="Icon.png" type="image/png"/>
</head>
<body>
  <header>
    <div class="brand-logo">
      <img src="Callva logo Horizontal.png" alt="CallVa Logo">
    </div>
    <h1>ุฅุฏุงุฑุฉ ุงูุนููุงุก</h1>
    <div class="user-info">
      <span id="currentUser"></span>
      <button onclick="logout()">ุชุณุฌูู ุฎุฑูุฌ</button>
    </div>
  </header>

  <nav class="navbar">
    <a href="leads.html">ุฌููุน ุงูุนููุงุก</a>
    <a href="my-leads.html">ุนููุงุฆู</a>
    <a href="meetings.html">ุฌููุน ุงูุงุฌุชูุงุนุงุช</a>
    <a href="my-meetings.html">ุงุฌุชูุงุนุงุชู</a>
    <a href="users.html" id="usersLink" style="display:none;">ุงููุณุชุฎุฏููู</a>
    <a href="dashboard.html">ุงูุฑุฆูุณูุฉ</a>
  </nav>


  <main>
    <div style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap;">
      <button onclick="showAddModal()" class="add-btn">+ ุฅุถุงูุฉ ุนููู ุฌุฏูุฏ</button>
      <button onclick="downloadExcelTemplate()" class="add-btn" style="background: #27ae60;">๐ฅ ุชุญููู ูุงูุจ Excel</button>
      <button onclick="document.getElementById('excelFileInput').click()" class="add-btn" style="background: #3498db;">๐ค ุงุณุชูุฑุงุฏ ูู Excel</button>
      <input type="file" id="excelFileInput" accept=".xlsx,.xls" style="display: none;" onchange="importFromExcel(event)">
    </div>

    <h2>ุนุฏุฏ ุงูุนููุงุก: <span id="leadsCount">0</span></h2>

    <!-- ูููุฐุฌ ุฅุถุงูุฉ ุนููู -->
    <div id="addModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal()">ร</span>
        <h2>ุฅุถุงูุฉ ุนููู ุฌุฏูุฏ</h2>
        <form id="addLeadForm">
          <input type="text" placeholder="ุงุณู ุงูุดุฑูุฉ" id="company" required />
          <input type="tel" placeholder="ุฑูู ุงููุงุชู" id="phone" required />
          <input type="url" placeholder="ุฑุงุจุท ุงููุชุฌุฑ (ุงุฎุชูุงุฑู)" id="storeLink" />
          <select id="type" required>
            <option value="cold">Cold Lead</option>
            <option value="hot">Hot Lead</option>
            <option value="hunt">Hunt Lead</option>
          </select>
          <button type="submit">ุฅุถุงูุฉ</button>
        </form>
      </div>
    </div>

    <!-- ูููุฐุฌ ุชุนุฏูู ุนููู -->
    <div id="editLeadModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal()">ร</span>
        <h2>ุชุนุฏูู ุจูุงูุงุช ุงูุนููู</h2>
        <form id="editLeadForm">
          <input type="hidden" id="editLeadId">
          <input type="text" placeholder="ุงุณู ุงูุดุฑูุฉ" id="editCompany" required />
          <input type="tel" placeholder="ุฑูู ุงููุงุชู" id="editPhone" required />
          <input type="url" placeholder="ุฑุงุจุท ุงููุชุฌุฑ (ุงุฎุชูุงุฑู)" id="editStoreLink" />
          <select id="editType" required>
            <option value="cold">Cold Lead</option>
            <option value="hot">Hot Lead</option>
            <option value="hunt">Hunt Lead</option>
          </select>
          <button type="submit">ุญูุธ ุงูุชุนุฏููุงุช</button>
        </form>
      </div>
    </div>

    <!-- ุฌุฏูู ุงูุนููุงุก -->
    <table id="leadsTable">
      <thead>
        <tr>
          <th>#</th>
          <th>ุงูุชุงุฑูุฎ ูุงูููุช</th>
          <th>ุงุณู ุงูุดุฑูุฉ</th>
          <th>ุฑูู ุงููุงุชู</th>
          <th>ุฑุงุจุท ุงููุชุฌุฑ</th>
          <th>ุงูููุน</th>
          <th>ุญุงูุฉ ุงูุฑุฏ</th>
          <th>ุญุงูุฉ ุงูุชุญููู</th>
          <th>ุงูููุธู</th>
          <th>ููุงุญุธุงุช</th>
          <th>ุฅุฌุฑุงุก</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </main>

  <!-- Firebase SDK v8 -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-analytics.js"></script>
  
  <script src="firebase-config.js"></script>
  <script src="firebase-db.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="script.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", initLeadsPage);
  </script>
</body>
</html>